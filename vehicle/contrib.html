<!DOCTYPE html>
<html>
  <head>
    <title>Contribution</title>
    <link href="css/style.css" type="text/css" rel="stylesheet" />
    <style type="text/css">
      #contrib_list {
        max-width: 854px;
        line-height: 175%;
        width: 75%;
		    margin: auto;
      }
	    p {
        width: 70%;
        margin: auto;
	    }
	</style>
  </head>
  <body>
    <h1 class="title">Obstacle Avoidance System Design and Path Planning for An Unmanned Vehicle</h1>
    <h6 class="author">Author: Maoyu Chien</h6>
    <h6 class="author">Advisor: Prof. Li-Sheng Wang, Prof. Fan-Ren Chang</h6>
    <div id="navlist">
      <ul>
        <li><a href="index.html">Abstract</a></li>
        <!-- li><a href="overview.html">Overview</a></li -->
        <li><a href="contrib.html">[Contributions]</a></li>
        <li><a href="rslt.html">Results</a></li>
      </ul>
    </div>
    <hr />
    <h2 align="center">My Contributions</h2>
    <!--p>My work was based on achievement of previous members of the lab I joined.
    My contributions to this project were:</p -->

  <div id="contrib_list">
	<ol>
    <li><a href="#rrt">Developed a path-planning system based on Rapidly-Exploring Random Tree (RRT)</a></li>
    <li><a href="#sys">Integrated the path-planning system with ultrasonic system</a></li>
	  <li><a href="#expo">Developed a specialized auto-exposure method for stereo camera</a></li>
	  <li><a href="#model">Developed a method to modeling obstacles detected by stereo camera</a></li>
	</ol>
  </div>
  <p>
    All programming tasks were done in C++.
  </p>

  <div id="rrt">
    <h3 class="cntr">Path-planning System</h3>
    <p>I developed the path-planning system based on Rapidly-Exploring Random Tree (RRT).
      The path-planning system takes the coordinates of the obstacles detected by stereo camera,
      creating a path to avoid the obstacles.</p><br/>
    <p>Here is an example of my RRT implementation:</p><br/>
    <table>
      <tr class="cntr">
        <td><img src="img/rrt1.jpg" width="320px" height="320px"/></td>
        <td><img src="img/rrt2.jpg" width="320px" height="320px"/></td>
      </tr>
      <tr class="cntr">
		<td><span class="imgdesc">step 0: tree reaches goal</span></td>
		<td><span class="imgdesc">step 1: intial path</span></td>
      </tr>
      <tr>
		<td>&nbsp</td>
		<td>&nbsp</td>
      </tr>
      <tr class="cntr">
        <td><img src="img/rrt3.jpg" width="320px" height="320px"/></td>
        <td><img src="img/rrt4.jpg" width="320px" height="320px"/></td>
      </td>
      <tr class="cntr">
		    <td><span class="imgdesc">step 2: shorten path</span></td>
		    <td><span class="imgdesc">step 3: trim unnecessary points</span></td>
      </tr>
    </table>
    <p class="imgdesc">The source code of RRT and a simple GUI are on <a href="https://github.com/AlvinJian/RRT-Test">Github</a></p>
    <br>
    <p>In real situation, the path-planning system only discovered the square area around the vehicle, and
    the area followed the position of the vehicle. In addition to the path points
    generated by RRT, the path-planning system utilized hermite curve interpolation to generate full path. See
    <a href="rslt.html#case1">Case 1</a> in the result page for real test.</p>
    <br/><p><a href="#navlist">^TOP</a></p>
  </div>

  <div id="sys">
  <h3 class="cntr">Integration of Path-planning And Ultrasonic Systems</h3>
  <p>I integrated the path-planning system with the ultrasonic sensor system,
    which was employed as a real-time obstacle avoidance method. The characteristics of
     these systems are:</p><br />
     <p>RRT-based Path-planning System:</p>
     <p><b>Pro:</b>
       <ul class="detail_list">
         <li>It took the obstacles detected by stereo camera, so the range of detection
           was much larger than ultrasonic sensors</li>
         <li>It handled multiple obstacles in systematic way</li>
       </ul>
     </p>
     <p><b>Con:</b>
       <ul class="detail_list">
         <li>It cost large amounts of computing resources</li>
         <li>The generated path might differ largely from the previous path due to its intrinsic randomness</li>
       </ul>
     </p><br>
     <p>Ultrasonic Sensor System:</p>
     <p><b>Pro:</b>
       <ul class="detail_list">
         <li>It took the obstacles detected by ultrasonic sensors and utilized fuzzy rules
           to avoid obstacle, so it runs faster.</li>
       </ul>
     </p>
     <p><b>Con:</b>
       <ul class="detail_list">
         <li>It can only avoid obstacles within 1 meter.</li>
         <li>Its scope of obstacle avoidance was localized</li>
       </ul>
     </p><br>
     <p>I developed a decision flow to integrate these systems so that they complement
        each other:</p>
    <br>
    <div class="cntr">
      <img id="flow" src="img/decision.png" width="854px" height="auto"/>
    </div><br>
    <p>See <a href="rslt.html#case2">Case 2</a> in the Result page for real test.</p>
    <br/><p><a href="#navlist">^TOP</a></p>
  </div>

  <div id="expo">
    <h3 class="cntr">Auto-exposure Method</h3>
    <p>Since the vehicle walks on the ground, the lower part of stereo camera
     should be ground where the exposure value is close to the obstacle.
     The specialized auto-exposure method can be expressed as following steps:</p><br/>
     <ol class="detail_list">
       <li>Weighted Average Brightness = (Average greyscale of the lower 1/3 part of the image) * 0.7 +
            Averge greyscale of other part * 0.3</li>
       <li>Iterate changing the exposure setting of stereo camera so that this weighted average brightness
            falls between 96~160(8-bit greyscale).</li>
     </ol><br/>
    <table border="0">
	  <tr class="cntr">
		  <td><img src="img/before.jpeg" width="320px" height="240px"/></td>
      <td><img src="img/after.jpeg" width="320px" height="240px"/></td>
	  </tr>
	  <tr class="cntr">
		  <td><span class="imgdesc">Built-in auto-exposure method</span></td>
		  <td><span class="imgdesc">Specialized auto-exposure method</span></td>
	  </tr>
	</table><br/>
	<p>With the specialized auto-exposure method, the images captured by stereo camera
	are more clear. Consequently, the result of obstacle detection is improved.</p>
    <br/><p><a href="#navlist">^TOP</a></p>
  </div>

  <div id="model">
    <h3 class="cntr">Modeling Obstacle Detected By Stereo Camera</h3>
    <p><!--SRI Stereo Engine was provided by the vendor of our stereo camera.
      The disparity map generated by the engine contained the position informations of
      all pixels. -->
      Position vectors of all pixels in the left eye image were obtained by the
       disparity map calculated by SRI Stereo Engine. SRI Stereo Engine was provided
       by the vendor of our stereo camera. The disparity map is illustrated as below:
    </p><br>
    <table border="0">
      <tr class="cntr">
        <td>
          <img src="img/leftimg.jpeg" width="320px" height="240px" />
        </td>
        <td>
          <img src="img/disparity.jpeg" width="320px" height="240px" />
        </td>
      </tr>
      <tr class="cntr">
        <td>
          <span class="imgdesc">Left Eye Image</span>
        </td>
        <td>
          <span class="imgdesc">Disparity Map by SRI Stereo Engine</span>
        </td>
      </tr>
      <tr>
        <td>&nbsp</td>
        <td>&nbsp</td>
      </tr>
    </table>
    <p>
      All pixels of the disparity map were put to a grid in front of the vehicle according to
      their coordinate, like:
    </p><br>
    <div class="cntr">
      <img src="img/obsmodel.png" width="400" height="auto"/>
      <p class="imgdesc">The grids I used to modeling the obstacles. Each block is 1mx1m</p>
    </div><br>
    <p>
      If the cumulative pixels of a block were higher than a specific threshold and
      the average height was higher than ground, that block was considered as an
      obstacle, represented by its central point, and sent to main station program
      for path planning.
    </p>
    <br><p><a href="#navlist">^TOP</a></p><br>
  </div>

  </body>
</html>
